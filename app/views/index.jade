doctype html
html(lang='en')
	head
		meta(charset='utf-8')
		meta(http-equiv='Content-Type', content='text/html;charset=utf-8')
		meta(name='viewport', content='width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no')

		title Baba Grammar Creator

		link(rel='stylesheet', href='/static/css/main.css', type='text/css')

	body
		header
			h1 Baba
			.slogan Create garbage texts

		#contents

		footer
			p
				| Baba Grammar Creator by Kim Silkebækken
				=' · '
				a(href='https://github.com/Lokaltog/baba') GitHub repo

	script(id='wordlist-template', type='text/ractive')
		section.wordlists
			!='{{#wordlists:classIdx}}'
			h1 {{class}}
			!='{{#groups:groupIdx}}'
			h1 {{name}}
			ul.builder.builder-wordlist
				!='{{#sortWords(words, sortOrder)}}'
				li.word
					span.word {{word}}
					ul.actions
						li.delete(on-click='wordlist-delete-word:{{words}}')
							i.icon.icon-delete
				!='{{/words}}'
				li.add-textfield
					input(type='text', placeholder='add word', data-autosize-input, on-change='wordlist-add-word')
				li.buttons
					.add.dropdown(href='#')
						i.icon.icon-add
				li.actions
					.ascending
						input(type='radio', name='{{.sortOrder}}', value='asc', id='wordlist-sort-asc-{{classIdx}}-{{groupIdx}}', checked)
						label(for='wordlist-sort-asc-{{classIdx}}-{{groupIdx}}')
							i.icon.icon-sort-ascending
					.descending
						input(type='radio', name='{{.sortOrder}}', value='desc', id='wordlist-sort-desc-{{classIdx}}-{{groupIdx}}')
						label(for='wordlist-sort-desc-{{classIdx}}-{{groupIdx}}')
							i.icon.icon-sort-descending
			!='{{/groups}}'
			!='{{/wordlists}}'

	script(id='sentence-template', type='text/ractive')
		section.sentences
			!='{{#sentences:idx}}'
			ul.builder.builder-sentence
				!='{{#elements}}'

				!='{{#static}}'
				// static phrase
				li.static {{phrase}}
				!='{{/static}}'

				!='{{^static}}'
				!='{{#preview}}'
				// preview word
				li(class='preview {{word.class}} {{word.class}}-{{word.group.key}}')
					| [preview]
				!='{{/preview}}'

				!='{{^preview}}'
				// display placeholder with edit functionality
				li(class='placeholder {{word.class}} {{word.class}}-{{word.group.key}}')
					ol.prefix
						!='{{#prefix}}'
						li(class='{{key}}') {{label}}
						!='{{/prefix}}'
					.word
						.class {{classFromIdx(classIdx).class}}
						.group {{groupFromIdx(classIdx, groupIdx).name}}
					ol.postfix
						!='{{#postfix}}'
						li(class='{{key}}') {{label}}
						!='{{/postfix}}'
					ul.actions
						li.edit
							i.icon.icon-edit
						li.delete
							i.icon.icon-delete
				!='{{/preview}}'
				!='{{/static}}'
				!='{{/elements}}'

				li.buttons
					// hide add button on preview
					!='{{^preview}}'
					.add.dropdown(href='#')
						i.icon.icon-add
						ul#dropdown
							li.static-phrase Phrase

							!='{{#wordlists}}'
							li(class='{{class}}') {{group}}
							!='{{/wordlists}}'
					!='{{/preview}}'

				li.actions
					!='{{#preview}}'
					.refresh
						button
							i.icon.icon-refresh
					!='{{/preview}}'
					.preview
						input(type='checkbox', checked='{{preview}}', id='sentence-preview-{{idx}}')
						label(for='sentence-preview-{{idx}}') Preview
			!='{{/sentences}}'

	script(id='contents-template', type='text/ractive')
		!='{{>wordlists}}'
		!='{{>sentences}}'

	script(src='//cdn.jsdelivr.net/g/jquery@2.1.0,ractive@0.4.0')
	script(src='/static/js/main.js')
