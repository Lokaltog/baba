doctype html
html(lang='en')
	head
		meta(charset='utf-8')
		meta(http-equiv='Content-Type', content='text/html;charset=utf-8')
		meta(name='viewport', content='width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no')

		title Baba Grammar Creator

		link(rel='stylesheet', href='/static/css/main.css', type='text/css')

	body
		header
			h1 Baba
			.slogan Garbage text generator

		#contents
			section.grammar(v-component='grammar', v-with='model: grammar')

		footer
			p
				| Baba Grammar Creator by Kim Silkebækken
				=' · '
				a(href='https://github.com/Lokaltog/baba') GitHub repo

	script(id='grammar-template', type='text/x-template')
		h1(v-show='model.label') {{model.label}}
		section(v-repeat='model: model.children', v-component='grammar')
		ul.builder(v-class='model.type', v-with='model: model.elements', v-component='container-{{model.type}}', v-if='model.elements')

	script(id='container-wordlist-template', type='text/x-template')
		li.expr(v-repeat='model')
			.word {{expr}}
			ul.actions
				li.delete
					i.icon.icon-delete

		li.add-textfield
			input(type='text', placeholder='add phrase', data-autosize-input)

	script(id='container-sentence-template', type='text/x-template')
		li(v-repeat='model', v-component='container-sentence-{{expr ? "expr" : "path"}}', v-class='expr: expr, path: path, preview: preview')

		li.buttons
			.dropdown-menu.btn(v-if='!preview')
				i.icon.icon-add
				ul.dropdown
					li.static-phrase Phrase
					// recursive menu here

		li.actions
			.refresh.btn(v-if='preview')
				i.icon.icon-refresh

			.preview.btn(v-class='active: preview', v-on='click: preview = !preview') Preview

	script(id='container-sentence-expr-template', type='text/x-template')
		.word {{expr}}
		ul.actions(v-if='!preview')
			li.edit
				i.icon.icon-edit
			li.delete
				i.icon.icon-delete

	script(id='container-sentence-path-template', type='text/x-template')
		.display(v-if='!preview')
			ol.prefix
				li(v-repeat='prefix') pre
			.word
				.class class
				.group {{path}}
			ol.postfix
				li(v-repeat='postfix') post
			ul.actions(v-if='!preview')
				li.edit
					i.icon.icon-edit
				li.delete
					i.icon.icon-delete
		.preview(v-if='preview')
			.word.class {{path}}

	script(src='//cdn.jsdelivr.net/g/jquery@2.1.0,vue@0.10.3')
	script(src='/static/js/uglifyjs.min.js')
	script(src='/static/js/main.js')
